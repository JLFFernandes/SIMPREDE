{"timestamp":"2025-06-05T21:12:36.143478","level":"info","event":"DAG bundles loaded: dags-folder","logger":"airflow.dag_processing.bundles.manager.DagBundlesManager"}
{"timestamp":"2025-06-05T21:12:36.144601","level":"info","event":"Filling up the DagBag from /opt/airflow/dags/google_scraper_dag.py","logger":"airflow.models.dagbag.DagBag"}
{"timestamp":"2025-06-05T21:12:36.215088Z","level":"info","event":"ğŸš€ Starting Airflow-Optimized Google News Scraper","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.215248Z","level":"info","event":"ğŸ“… Using current date: 2025-06-05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.215376Z","level":"info","event":"ğŸ“… Using current date: 2025-06-05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.215586Z","level":"info","event":"ğŸ“ Ensured directories exist: ['/opt/airflow/scripts/google_scraper/data/raw/2025/06/05', '/opt/airflow/scripts/google_scraper/data/structured/2025/06/05', '/opt/airflow/scripts/google_scraper/data/processed/2025/06/05']","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.215661Z","level":"info","event":"ğŸ“… Scraper Parameters:","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.215723Z","level":"info","event":"  - Days: 1","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.215814Z","level":"info","event":"  - Specific date: None (use execution_date)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216125Z","level":"info","event":"  - Max execution time: 3600 seconds","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216297Z","level":"info","event":"  - Target date: 2025-06-05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216374Z","level":"info","event":"ğŸ“ Output paths:","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216456Z","level":"info","event":"  - intermediate_csv: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/intermediate_google_news_20250605.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216569Z","level":"info","event":"  - final_csv: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/google_news_articles_20250605.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216657Z","level":"info","event":"  - log_file: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/scraper_log_20250605.log","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.216725Z","level":"info","event":"  - stats_json: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/scraper_stats_20250605.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.217768Z","level":"info","event":"ğŸ”„ Running scraper command: python /opt/airflow/scripts/google_scraper/scraping/run_scraper_airflow.py --dias 1 --max_time 3600 --output_dir /opt/airflow/scripts/google_scraper/data/raw/2025/06/05 --date_str 20250605 --date 2025-06-05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.218650Z","level":"info","event":"â° Waiting for scraper completion with timeout: 3600 seconds","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.623124Z","level":"info","event":"ğŸ“‹ A iniciar scraper do Google News (versÃ£o Airflow)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.623338Z","level":"info","event":"ğŸ“‹ ParÃ¢metros: dias=1, date=2025-06-05, max_time=3600","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.623426Z","level":"info","event":"ğŸ“‹ Paths: output_dir=/opt/airflow/scripts/google_scraper/data/raw/2025/06/05, date_str=20250605","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.626091Z","level":"info","event":"ğŸ“‹ ğŸ“ A usar ficheiro de saÃ­da controlado: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/intermediate_google_news_20250605.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.626240Z","level":"info","event":"ğŸ“‹ â±ï¸ Tempo mÃ¡ximo de execuÃ§Ã£o: 3600 segundos","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628588Z","level":"info","event":"ğŸ“‹ ğŸš€ A iniciar funÃ§Ã£o do scraper otimizada para Airflow","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628692Z","level":"info","event":"ğŸ“‹ âš™ï¸  ParÃ¢metros: days_back=1, search_date=2025-06-05, max_time=3600s","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628754Z","level":"info","event":"ğŸ“‹ ğŸ“ Diretoria de saÃ­da: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628807Z","level":"info","event":"ğŸ“‹ ğŸ“… String de data: 20250605","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628854Z","level":"info","event":"ğŸ“‹ ğŸš€ A iniciar o scraper do Google News...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628916Z","level":"info","event":"ğŸ“‹ ğŸ“… Data: 2025-06-05, Dias anteriores: 1","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.628965Z","level":"info","event":"ğŸ“‹ ğŸ“ Diretoria de saÃ­da controlada: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.629092Z","level":"info","event":"ğŸ“‹ ğŸ“… String de data: 20250605","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.778404Z","level":"info","event":"ğŸ“‹ ğŸ“ Diretoria do script: /opt/airflow/scripts/google_scraper/scraping","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.778791Z","level":"info","event":"ğŸ“‹ ğŸ“ Raiz do projeto: /opt/airflow","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:36.779117Z","level":"info","event":"ğŸ“‹ ğŸ”§ A carregar ficheiros de configuraÃ§Ã£o...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.015996Z","level":"info","event":"ğŸ“‹ ğŸ” A procurar ficheiros de configuraÃ§Ã£o em: ['/opt/airflow/config', '/opt/airflow/simprede-airflow/config', '/opt/airflow/scripts/google_scraper/scraping/../../../config', '/opt/airflow/scripts/google_scraper/scraping/../config', '/opt/airflow/scripts/google_scraper/scraping/config', '/opt/airflow/config', '/opt/airflow/simprede-airflow/config', 'config']","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.016558Z","level":"info","event":"ğŸ“‹ ğŸ“ A carregar palavras-chave de: /opt/airflow/scripts/google_scraper/scraping/../config/keywords.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.016828Z","level":"info","event":"ğŸ“‹ âœ… Carregadas 6 palavras-chave","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.016938Z","level":"info","event":"ğŸ“‹ ğŸ“ A carregar localizaÃ§Ãµes de: /opt/airflow/scripts/google_scraper/scraping/../config/municipios_por_distrito.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.018013Z","level":"info","event":"ğŸ“‹ âœ… Carregadas 306 freguesias, 306 municÃ­pios, 29 distritos","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.020915Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.021590Z","level":"info","event":"ğŸ“‹ ConfiguraÃ§Ã£o Carregada","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.022162Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.022516Z","level":"info","event":"ğŸ“‹   Palavras-chave: 6","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.022831Z","level":"info","event":"ğŸ“‹   Total de LocalizaÃ§Ãµes: 641","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.023251Z","level":"info","event":"ğŸ“‹   Freguesias: 306","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.024022Z","level":"info","event":"ğŸ“‹   MunicÃ­pios: 306","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.024571Z","level":"info","event":"ğŸ“‹   Distritos: 29","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.025362Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.056231Z","level":"info","event":"ğŸ“‹ ğŸ§¹ Cache limpa","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.058603Z","level":"info","event":"ğŸ“‹ ğŸ“… A usar data especÃ­fica: 2025-06-05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.058823Z","level":"info","event":"ğŸ“‹ ğŸ“ Diretoria de saÃ­da: /opt/airflow/data/raw/2025/06/05","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059193Z","level":"info","event":"ğŸ“‹ ğŸ”„ A gerar combinaÃ§Ãµes palavra-chave-localizaÃ§Ã£o...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059339Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059418Z","level":"info","event":"ğŸ“‹ CombinaÃ§Ãµes Geradas","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059482Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059582Z","level":"info","event":"ğŸ“‹   Total de CombinaÃ§Ãµes: 3846","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059667Z","level":"info","event":"ğŸ“‹   Palavras-chave: 6","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059740Z","level":"info","event":"ğŸ“‹   LocalizaÃ§Ãµes: 641","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059828Z","level":"info","event":"ğŸ“‹   Palavras-chave PrioritÃ¡rias: 5","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.059928Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060049Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060154Z","level":"info","event":"ğŸ“‹ ConfiguraÃ§Ã£o de Processamento","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060245Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060324Z","level":"info","event":"ğŸ“‹   Total de CombinaÃ§Ãµes: 3846","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060405Z","level":"info","event":"ğŸ“‹   Tamanho do Lote: 300","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060484Z","level":"info","event":"ğŸ“‹   Lotes Estimados: 13","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060632Z","level":"info","event":"ğŸ“‹   MÃ¡x. Pedidos Concorrentes: 180","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060704Z","level":"info","event":"ğŸ“‹ ==================================================","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060803Z","level":"info","event":"ğŸ“‹ ğŸ”— A configurar sessÃ£o HTTP equilibrada...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:38.060874Z","level":"info","event":"ğŸ“‹ ğŸ” A verificar acesso ao feed RSS do Google News...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.593613Z","level":"info","event":"ğŸ“‹ 2025-06-05 22:12:46,592 - run_scraper_airflow - ERROR - âŒ NÃ£o foi possÃ­vel aceder ao Google News: estado HTTP 503","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.595723Z","level":"info","event":"ğŸ“‹ 2025-06-05 22:12:46,593 - run_scraper_airflow - ERROR - ğŸ›‘ NÃ£o Ã© possÃ­vel continuar com o scraping pois o Google News nÃ£o estÃ¡ acessÃ­vel","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.596442Z","level":"info","event":"ğŸ“‹ ğŸ‰ ExecuÃ§Ã£o do Airflow concluÃ­da com sucesso! Artigos: 0","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.597255Z","level":"info","event":"ğŸ“‹ âœ… Scraping concluÃ­do. Guardados 0 artigos","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.815371Z","level":"info","event":"âœ… Scraper completed successfully!","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.815826Z","level":"info","event":"ğŸ” Verifying scraper outputs:","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.816118Z","level":"info","event":"âœ… intermediate_csv: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/intermediate_google_news_20250605.csv (255935 bytes)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:46.816426Z","level":"info","event":"âœ… final_csv: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/google_news_articles_20250605.csv (5342 bytes)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:47.873174Z","level":"info","event":"ğŸ“Š Number of articles scraped: 12","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:47.873428Z","level":"info","event":"ğŸ“Š Columns: ['ID', 'keyword', 'localidade', 'title', 'link', 'published', 'collection_date']","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:47.874434Z","level":"info","event":"âš ï¸ log_file: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/scraper_log_20250605.log (not found)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:47.874588Z","level":"info","event":"âš ï¸ stats_json: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/scraper_stats_20250605.json (not found)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-05T21:12:47.873848","level":"info","event":"Done. Returned value was: A iniciar scraper do Google News (versÃ£o Airflow)\nParÃ¢metros: dias=1, date=2025-06-05, max_time=3600\nPaths: output_dir=/opt/airflow/scripts/google_scraper/data/raw/2025/06/05, date_str=20250605\nğŸ“ A usar ficheiro de saÃ­da controlado: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05/intermediate_google_news_20250605.csv\nâ±ï¸ Tempo mÃ¡ximo de execuÃ§Ã£o: 3600 segundos\nğŸš€ A iniciar funÃ§Ã£o do scraper otimizada para Airflow\nâš™ï¸  ParÃ¢metros: days_back=1, search_date=2025-06-05, max_time=3600s\nğŸ“ Diretoria de saÃ­da: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05\nğŸ“… String de data: 20250605\nğŸš€ A iniciar o scraper do Google News...\nğŸ“… Data: 2025-06-05, Dias anteriores: 1\nğŸ“ Diretoria de saÃ­da controlada: /opt/airflow/scripts/google_scraper/data/raw/2025/06/05\nğŸ“… String de data: 20250605\nğŸ“ Diretoria do script: /opt/airflow/scripts/google_scraper/scraping\nğŸ“ Raiz do projeto: /opt/airflow\nğŸ”§ A carregar ficheiros de configuraÃ§Ã£o...\nğŸ” A procurar ficheiros de configuraÃ§Ã£o em: ['/opt/airflow/config', '/opt/airflow/simprede-airflow/config', '/opt/airflow/scripts/google_scraper/scraping/../../../config', '/opt/airflow/scripts/google_scraper/scraping/../config', '/opt/airflow/scripts/google_scraper/scraping/config', '/opt/airflow/config', '/opt/airflow/simprede-airflow/config', 'config']\nğŸ“ A carregar palavras-chave de: /opt/airflow/scripts/google_scraper/scraping/../config/keywords.json\nâœ… Carregadas 6 palavras-chave\nğŸ“ A carregar localizaÃ§Ãµes de: /opt/airflow/scripts/google_scraper/scraping/../config/municipios_por_distrito.json\nâœ… Carregadas 306 freguesias, 306 municÃ­pios, 29 distritos\n==================================================\nConfiguraÃ§Ã£o Carregada\n==================================================\n  Palavras-chave: 6\n  Total de LocalizaÃ§Ãµes: 641\n  Freguesias: 306\n  MunicÃ­pios: 306\n  Distritos: 29\n==================================================\nğŸ§¹ Cache limpa\nğŸ“… A usar data especÃ­fica: 2025-06-05\nğŸ“ Diretoria de saÃ­da: /opt/airflow/data/raw/2025/06/05\nğŸ”„ A gerar combinaÃ§Ãµes palavra-chave-localizaÃ§Ã£o...\n==================================================\nCombinaÃ§Ãµes Geradas\n==================================================\n  Total de CombinaÃ§Ãµes: 3846\n  Palavras-chave: 6\n  LocalizaÃ§Ãµes: 641\n  Palavras-chave PrioritÃ¡rias: 5\n==================================================\n==================================================\nConfiguraÃ§Ã£o de Processamento\n==================================================\n  Total de CombinaÃ§Ãµes: 3846\n  Tamanho do Lote: 300\n  Lotes Estimados: 13\n  MÃ¡x. Pedidos Concorrentes: 180\n==================================================\nğŸ”— A configurar sessÃ£o HTTP equilibrada...\nğŸ” A verificar acesso ao feed RSS do Google News...\n2025-06-05 22:12:46,592 - run_scraper_airflow - ERROR - âŒ NÃ£o foi possÃ­vel aceder ao Google News: estado HTTP 503\n2025-06-05 22:12:46,593 - run_scraper_airflow - ERROR - ğŸ›‘ NÃ£o Ã© possÃ­vel continuar com o scraping pois o Google News nÃ£o estÃ¡ acessÃ­vel\nğŸ‰ ExecuÃ§Ã£o do Airflow concluÃ­da com sucesso! Artigos: 0\nâœ… Scraping concluÃ­do. Guardados 0 artigos\n","logger":"airflow.task.operators.airflow.providers.standard.operators.python.PythonOperator"}
