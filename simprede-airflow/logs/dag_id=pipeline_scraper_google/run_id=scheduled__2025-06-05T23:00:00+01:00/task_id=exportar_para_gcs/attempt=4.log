{"timestamp":"2025-06-06T14:40:10.381767","level":"info","event":"DAG bundles loaded: dags-folder","logger":"airflow.dag_processing.bundles.manager.DagBundlesManager"}
{"timestamp":"2025-06-06T14:40:10.383264","level":"info","event":"Filling up the DagBag from /opt/airflow/dags/google_scraper_dag.py","logger":"airflow.models.dagbag.DagBag"}
{"timestamp":"2025-06-06T14:40:10.634799Z","level":"info","event":"🔄 Starting export_to_gcs task","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.635305Z","level":"info","event":"📁 Using paths from export_supabase task: 2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.646677Z","level":"info","event":"📅 Using provided execution date: 2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.648717Z","level":"info","event":"📁 Ensured directories exist: ['/opt/airflow/scripts/google_scraper/data/raw/2025/06/06', '/opt/airflow/scripts/google_scraper/data/structured/2025/06/06', '/opt/airflow/scripts/google_scraper/data/processed/2025/06/06']","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.649937Z","level":"info","event":"📅 GCS Export Parameters:","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.650217Z","level":"info","event":"  - Days: 1","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.650431Z","level":"info","event":"  - Specific date: None (use execution_date)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.650663Z","level":"info","event":"  - Target date: 2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.650809Z","level":"info","event":"  - Base data directory: /opt/airflow/scripts/google_scraper/data","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.651295Z","level":"info","event":"  - GCS Project ID: From config/environment","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.651498Z","level":"info","event":"  - GCS Bucket: From config/environment","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.651767Z","level":"info","event":"🔄 Running GCS export command: python /opt/airflow/scripts/google_scraper/exportador_gcs/export_to_gcs_airflow.py --date 2025-06-06 --base_data_dir /opt/airflow/scripts/google_scraper/data --output_dir /opt/airflow/scripts/google_scraper/data/processed/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:10.652200Z","level":"info","event":"⏰ Waiting for GCS export completion with timeout: 900 seconds","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.789127Z","level":"info","event":"📋 2025-06-06 15:40:12,787 - INFO - 2025-06-06 15:40:12 - Starting export_to_gcs_airflow","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.790101Z","level":"info","event":"📋 2025-06-06 15:40:12,787 - INFO - 2025-06-06 15:40:12 - Parameters: date=2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.790581Z","level":"info","event":"📋 2025-06-06 15:40:12,787 - INFO - 2025-06-06 15:40:12 - Paths: base_data_dir=/opt/airflow/scripts/google_scraper/data, output_dir=/opt/airflow/scripts/google_scraper/data/processed/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.790774Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - GCS: project_id=None, bucket=None","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.794524Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - Airflow logs: include=True, dir=/opt/airflow/logs","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.794780Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - Cleanup: enabled=True, partial_success=False, dry_run=False","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.794962Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🚀 Starting GCS export for date: 2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.795390Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 📁 Base data directory: /opt/airflow/scripts/google_scraper/data","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.795572Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 📋 Include Airflow logs: True","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.795705Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🧹 Cleanup after export: True","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.795848Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🧹 Cleanup on partial success: False","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.796019Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🧹 Dry run cleanup: False","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.796173Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🔧 GCS Configuration:","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.796320Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 -   - Project ID: simprede-461309","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.796654Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 -   - Bucket: simprede-data-pipeline","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.796804Z","level":"info","event":"📋 2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 -   - Credentials: /opt/airflow/config/gcs-credentials.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:12.887099Z","level":"info","event":"📋 2025-06-06 15:40:12,886 - INFO - 2025-06-06 15:40:12 - ✅ Initialized GCS client with service account: /opt/airflow/config/gcs-credentials.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.236252Z","level":"info","event":"📋 2025-06-06 15:40:13,235 - INFO - 2025-06-06 15:40:13 - ✅ Bucket 'simprede-data-pipeline' already exists","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.244804Z","level":"info","event":"📋 2025-06-06 15:40:13,244 - INFO - 2025-06-06 15:40:13 - 📁 Found data directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.245609Z","level":"info","event":"📋 2025-06-06 15:40:13,245 - INFO - 2025-06-06 15:40:13 - 📁 Found data directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.246309Z","level":"info","event":"📋 2025-06-06 15:40:13,246 - INFO - 2025-06-06 15:40:13 - 📁 Found data directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.246582Z","level":"info","event":"📋 2025-06-06 15:40:13,246 - INFO - 2025-06-06 15:40:13 - 📤 Exporting data directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.246794Z","level":"info","event":"📋 2025-06-06 15:40:13,246 - INFO - 2025-06-06 15:40:13 - 📁 Scanning directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.249485Z","level":"info","event":"📋 2025-06-06 15:40:13,247 - INFO - 2025-06-06 15:40:13 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/raw/2025/06/06/google_news_articles_20250606.csv → gs://simprede-data-pipeline/data/raw/2025/06/06/google_news_articles_20250606.csv (0.01 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.391882Z","level":"info","event":"📋 2025-06-06 15:40:13,391 - INFO - 2025-06-06 15:40:13 - ✅ Successfully uploaded: data/raw/2025/06/06/google_news_articles_20250606.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.393610Z","level":"info","event":"📋 2025-06-06 15:40:13,391 - INFO - 2025-06-06 15:40:13 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/raw/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv → gs://simprede-data-pipeline/data/raw/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.527943Z","level":"info","event":"📋 2025-06-06 15:40:13,526 - INFO - 2025-06-06 15:40:13 - ✅ Successfully uploaded: data/raw/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:13.529013Z","level":"info","event":"📋 2025-06-06 15:40:13,528 - INFO - 2025-06-06 15:40:13 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/raw/2025/06/06/intermediate_google_news_20250606.csv → gs://simprede-data-pipeline/data/raw/2025/06/06/intermediate_google_news_20250606.csv (0.17 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.009191Z","level":"info","event":"📋 2025-06-06 15:40:14,008 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/raw/2025/06/06/intermediate_google_news_20250606.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.009864Z","level":"info","event":"📋 2025-06-06 15:40:14,008 - INFO - 2025-06-06 15:40:14 - 📤 Exporting data directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.010011Z","level":"info","event":"📋 2025-06-06 15:40:14,008 - INFO - 2025-06-06 15:40:14 - 📁 Scanning directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.010343Z","level":"info","event":"📋 2025-06-06 15:40:14,010 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/structured/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv → gs://simprede-data-pipeline/data/structured/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.123621Z","level":"info","event":"📋 2025-06-06 15:40:14,123 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/structured/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.124066Z","level":"info","event":"📋 2025-06-06 15:40:14,123 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/structured/2025/06/06/processing_stats_20250606.json → gs://simprede-data-pipeline/data/structured/2025/06/06/processing_stats_20250606.json (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.252191Z","level":"info","event":"📋 2025-06-06 15:40:14,251 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/structured/2025/06/06/processing_stats_20250606.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.252791Z","level":"info","event":"📋 2025-06-06 15:40:14,251 - INFO - 2025-06-06 15:40:14 - 📤 Exporting data directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.253217Z","level":"info","event":"📋 2025-06-06 15:40:14,251 - INFO - 2025-06-06 15:40:14 - 📁 Scanning directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.253852Z","level":"info","event":"📋 2025-06-06 15:40:14,253 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/export_stats_20250606.json → gs://simprede-data-pipeline/data/processed/2025/06/06/export_stats_20250606.json (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.373873Z","level":"info","event":"📋 2025-06-06 15:40:14,373 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/processed/2025/06/06/export_stats_20250606.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.375363Z","level":"info","event":"📋 2025-06-06 15:40:14,374 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/export_backup_20250606.csv → gs://simprede-data-pipeline/data/processed/2025/06/06/export_backup_20250606.csv (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.503375Z","level":"info","event":"📋 2025-06-06 15:40:14,502 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/processed/2025/06/06/export_backup_20250606.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.504089Z","level":"info","event":"📋 2025-06-06 15:40:14,503 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/gcs_export_stats_20250606.json → gs://simprede-data-pipeline/data/processed/2025/06/06/gcs_export_stats_20250606.json (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.641343Z","level":"info","event":"📋 2025-06-06 15:40:14,641 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/processed/2025/06/06/gcs_export_stats_20250606.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.644029Z","level":"info","event":"📋 2025-06-06 15:40:14,641 - INFO - 2025-06-06 15:40:14 - 📋 Starting Airflow logs export...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.644251Z","level":"info","event":"📋 2025-06-06 15:40:14,641 - INFO - 2025-06-06 15:40:14 - 📋 Starting Airflow logs export for 2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.657880Z","level":"info","event":"📋 2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 📋 Found 0 Airflow log paths for 2025-06-06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.658049Z","level":"info","event":"📋 2025-06-06 15:40:14,657 - WARNING - 2025-06-06 15:40:14 - ℹ️ No Airflow logs found for the target date","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.658172Z","level":"info","event":"📋 2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 📋 Airflow logs export completed: 0 uploaded, 0 failed","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.658279Z","level":"info","event":"📋 2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 🧹 Starting cleanup of exported data directories...","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.658558Z","level":"info","event":"📋 2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 🧹 Starting cleanup of 3 data directories","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.658657Z","level":"info","event":"📋 2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - ✅ All files from /opt/airflow/scripts/google_scraper/data/raw/2025/06/06 uploaded successfully","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.658808Z","level":"info","event":"📋 2025-06-06 15:40:14,658 - INFO - 2025-06-06 15:40:14 - 🗑️ Deleting directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06 (0.19 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.662847Z","level":"info","event":"📋 2025-06-06 15:40:14,662 - INFO - 2025-06-06 15:40:14 - ✅ Successfully deleted directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.662972Z","level":"info","event":"📋 2025-06-06 15:40:14,662 - INFO - 2025-06-06 15:40:14 - ✅ All files from /opt/airflow/scripts/google_scraper/data/structured/2025/06/06 uploaded successfully","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.663194Z","level":"info","event":"📋 2025-06-06 15:40:14,663 - INFO - 2025-06-06 15:40:14 - 🗑️ Deleting directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06 (0.00 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.664053Z","level":"info","event":"📋 2025-06-06 15:40:14,663 - INFO - 2025-06-06 15:40:14 - ✅ Successfully deleted directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.664266Z","level":"info","event":"📋 2025-06-06 15:40:14,663 - INFO - 2025-06-06 15:40:14 - ✅ All files from /opt/airflow/scripts/google_scraper/data/processed/2025/06/06 uploaded successfully","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.664456Z","level":"info","event":"📋 2025-06-06 15:40:14,664 - INFO - 2025-06-06 15:40:14 - 🗑️ Deleting directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06 (0.01 MB)","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.665792Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 - ✅ Successfully deleted directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.665944Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 - 🧹 Cleanup completed: 3/3 directories cleaned","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.666049Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 - ✅ Export completed:","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.666268Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Data directories: 3","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.666971Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Data files uploaded: 8/8","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.667303Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Airflow logs uploaded: 0","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.667688Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Total files uploaded: 8/8","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.667899Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Total size: 0.20 MB","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.668356Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Bucket: gs://simprede-data-pipeline","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.668577Z","level":"info","event":"📋 2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Directories cleaned: 3/3","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.669613Z","level":"info","event":"📋 2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - ✅ Export statistics saved: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/gcs_export_stats_20250606.json","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.670517Z","level":"info","event":"📋 2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - ✅ GCS export completed successfully","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.670595Z","level":"info","event":"📋 2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - 📊 Summary: 8 files uploaded (0 logs), 0.2 MB","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.670779Z","level":"info","event":"📋 2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - 🧹 Cleanup: 3 directories cleaned","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.785833Z","level":"info","event":"✅ GCS export completed successfully!","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.786856Z","level":"info","event":"📊 Successfully uploaded 8 files to GCS","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.787037Z","level":"info","event":"📊 Total size uploaded: 0.01 MB","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.787239Z","level":"info","event":"☁️ GCS bucket: gs://simprede-data-pipeline/data/raw/2025/06/06/google_news_articles_20250606.csv","chan":"stdout","logger":"task"}
{"timestamp":"2025-06-06T14:40:14.788820","level":"info","event":"Done. Returned value was: 2025-06-06 15:40:12,787 - INFO - 2025-06-06 15:40:12 - Starting export_to_gcs_airflow\n2025-06-06 15:40:12,787 - INFO - 2025-06-06 15:40:12 - Parameters: date=2025-06-06\n2025-06-06 15:40:12,787 - INFO - 2025-06-06 15:40:12 - Paths: base_data_dir=/opt/airflow/scripts/google_scraper/data, output_dir=/opt/airflow/scripts/google_scraper/data/processed/2025/06/06\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - GCS: project_id=None, bucket=None\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - Airflow logs: include=True, dir=/opt/airflow/logs\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - Cleanup: enabled=True, partial_success=False, dry_run=False\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🚀 Starting GCS export for date: 2025-06-06\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 📁 Base data directory: /opt/airflow/scripts/google_scraper/data\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 📋 Include Airflow logs: True\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🧹 Cleanup after export: True\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🧹 Cleanup on partial success: False\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🧹 Dry run cleanup: False\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 - 🔧 GCS Configuration:\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 -   - Project ID: simprede-461309\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 -   - Bucket: simprede-data-pipeline\n2025-06-06 15:40:12,788 - INFO - 2025-06-06 15:40:12 -   - Credentials: /opt/airflow/config/gcs-credentials.json\n2025-06-06 15:40:12,886 - INFO - 2025-06-06 15:40:12 - ✅ Initialized GCS client with service account: /opt/airflow/config/gcs-credentials.json\n2025-06-06 15:40:13,235 - INFO - 2025-06-06 15:40:13 - ✅ Bucket 'simprede-data-pipeline' already exists\n2025-06-06 15:40:13,244 - INFO - 2025-06-06 15:40:13 - 📁 Found data directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06\n2025-06-06 15:40:13,245 - INFO - 2025-06-06 15:40:13 - 📁 Found data directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06\n2025-06-06 15:40:13,246 - INFO - 2025-06-06 15:40:13 - 📁 Found data directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06\n2025-06-06 15:40:13,246 - INFO - 2025-06-06 15:40:13 - 📤 Exporting data directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06\n2025-06-06 15:40:13,246 - INFO - 2025-06-06 15:40:13 - 📁 Scanning directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06\n2025-06-06 15:40:13,247 - INFO - 2025-06-06 15:40:13 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/raw/2025/06/06/google_news_articles_20250606.csv → gs://simprede-data-pipeline/data/raw/2025/06/06/google_news_articles_20250606.csv (0.01 MB)\n2025-06-06 15:40:13,391 - INFO - 2025-06-06 15:40:13 - ✅ Successfully uploaded: data/raw/2025/06/06/google_news_articles_20250606.csv\n2025-06-06 15:40:13,391 - INFO - 2025-06-06 15:40:13 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/raw/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv → gs://simprede-data-pipeline/data/raw/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv (0.00 MB)\n2025-06-06 15:40:13,526 - INFO - 2025-06-06 15:40:13 - ✅ Successfully uploaded: data/raw/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv\n2025-06-06 15:40:13,528 - INFO - 2025-06-06 15:40:13 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/raw/2025/06/06/intermediate_google_news_20250606.csv → gs://simprede-data-pipeline/data/raw/2025/06/06/intermediate_google_news_20250606.csv (0.17 MB)\n2025-06-06 15:40:14,008 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/raw/2025/06/06/intermediate_google_news_20250606.csv\n2025-06-06 15:40:14,008 - INFO - 2025-06-06 15:40:14 - 📤 Exporting data directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06\n2025-06-06 15:40:14,008 - INFO - 2025-06-06 15:40:14 - 📁 Scanning directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06\n2025-06-06 15:40:14,010 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/structured/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv → gs://simprede-data-pipeline/data/structured/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv (0.00 MB)\n2025-06-06 15:40:14,123 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/structured/2025/06/06/artigos_google_municipios_pt_2025-06-06.csv\n2025-06-06 15:40:14,123 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/structured/2025/06/06/processing_stats_20250606.json → gs://simprede-data-pipeline/data/structured/2025/06/06/processing_stats_20250606.json (0.00 MB)\n2025-06-06 15:40:14,251 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/structured/2025/06/06/processing_stats_20250606.json\n2025-06-06 15:40:14,251 - INFO - 2025-06-06 15:40:14 - 📤 Exporting data directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06\n2025-06-06 15:40:14,251 - INFO - 2025-06-06 15:40:14 - 📁 Scanning directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06\n2025-06-06 15:40:14,253 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/export_stats_20250606.json → gs://simprede-data-pipeline/data/processed/2025/06/06/export_stats_20250606.json (0.00 MB)\n2025-06-06 15:40:14,373 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/processed/2025/06/06/export_stats_20250606.json\n2025-06-06 15:40:14,374 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/export_backup_20250606.csv → gs://simprede-data-pipeline/data/processed/2025/06/06/export_backup_20250606.csv (0.00 MB)\n2025-06-06 15:40:14,502 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/processed/2025/06/06/export_backup_20250606.csv\n2025-06-06 15:40:14,503 - INFO - 2025-06-06 15:40:14 - 📤 Uploading /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/gcs_export_stats_20250606.json → gs://simprede-data-pipeline/data/processed/2025/06/06/gcs_export_stats_20250606.json (0.00 MB)\n2025-06-06 15:40:14,641 - INFO - 2025-06-06 15:40:14 - ✅ Successfully uploaded: data/processed/2025/06/06/gcs_export_stats_20250606.json\n2025-06-06 15:40:14,641 - INFO - 2025-06-06 15:40:14 - 📋 Starting Airflow logs export...\n2025-06-06 15:40:14,641 - INFO - 2025-06-06 15:40:14 - 📋 Starting Airflow logs export for 2025-06-06\n2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 📋 Found 0 Airflow log paths for 2025-06-06\n2025-06-06 15:40:14,657 - WARNING - 2025-06-06 15:40:14 - ℹ️ No Airflow logs found for the target date\n2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 📋 Airflow logs export completed: 0 uploaded, 0 failed\n2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 🧹 Starting cleanup of exported data directories...\n2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - 🧹 Starting cleanup of 3 data directories\n2025-06-06 15:40:14,657 - INFO - 2025-06-06 15:40:14 - ✅ All files from /opt/airflow/scripts/google_scraper/data/raw/2025/06/06 uploaded successfully\n2025-06-06 15:40:14,658 - INFO - 2025-06-06 15:40:14 - 🗑️ Deleting directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06 (0.19 MB)\n2025-06-06 15:40:14,662 - INFO - 2025-06-06 15:40:14 - ✅ Successfully deleted directory: /opt/airflow/scripts/google_scraper/data/raw/2025/06/06\n2025-06-06 15:40:14,662 - INFO - 2025-06-06 15:40:14 - ✅ All files from /opt/airflow/scripts/google_scraper/data/structured/2025/06/06 uploaded successfully\n2025-06-06 15:40:14,663 - INFO - 2025-06-06 15:40:14 - 🗑️ Deleting directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06 (0.00 MB)\n2025-06-06 15:40:14,663 - INFO - 2025-06-06 15:40:14 - ✅ Successfully deleted directory: /opt/airflow/scripts/google_scraper/data/structured/2025/06/06\n2025-06-06 15:40:14,663 - INFO - 2025-06-06 15:40:14 - ✅ All files from /opt/airflow/scripts/google_scraper/data/processed/2025/06/06 uploaded successfully\n2025-06-06 15:40:14,664 - INFO - 2025-06-06 15:40:14 - 🗑️ Deleting directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06 (0.01 MB)\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 - ✅ Successfully deleted directory: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 - 🧹 Cleanup completed: 3/3 directories cleaned\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 - ✅ Export completed:\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Data directories: 3\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Data files uploaded: 8/8\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Airflow logs uploaded: 0\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Total files uploaded: 8/8\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Total size: 0.20 MB\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Bucket: gs://simprede-data-pipeline\n2025-06-06 15:40:14,665 - INFO - 2025-06-06 15:40:14 -   - Directories cleaned: 3/3\n2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - ✅ Export statistics saved: /opt/airflow/scripts/google_scraper/data/processed/2025/06/06/gcs_export_stats_20250606.json\n2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - ✅ GCS export completed successfully\n2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - 📊 Summary: 8 files uploaded (0 logs), 0.2 MB\n2025-06-06 15:40:14,668 - INFO - 2025-06-06 15:40:14 - 🧹 Cleanup: 3 directories cleaned\n","logger":"airflow.task.operators.airflow.providers.standard.operators.python.PythonOperator"}
